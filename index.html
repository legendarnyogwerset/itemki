<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPIS MOCNYCH ITEMK√ìW</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.8/minified/html5-qrcode.min.js"></script>
</head>
<body>
    <div class="app">
        <!-- Navigation -->
        <nav class="nav">
            <div class="nav__brand">
                <h1 class="nav__title">ZarzƒÖdzanie</h1>
            </div>
            <div class="nav__tabs">
                <button class="nav__tab" data-tab="scanner">
                    <span class="nav__tab-icon">üì±</span>
                    <span class="nav__tab-text">Skaner</span>
                </button>
                <button class="nav__tab nav__tab--active" data-tab="lista">
                    <span class="nav__tab-icon">üìã</span>
                    <span class="nav__tab-text">Lista</span>
                </button>
                <button class="nav__tab" data-tab="eksport">
                    <span class="nav__tab-icon">üì§</span>
                    <span class="nav__tab-text">Eksport</span>
                </button>
                <button class="nav__tab" data-tab="import">
                    <span class="nav__tab-icon">üì•</span>
                    <span class="nav__tab-text">Import</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main">
            <!-- Scanner Tab -->
            <div class="tab-content" id="scanner-tab">
                <div class="scanner-section">
                    <div class="scanner-controls">
                        <h2>Skanuj</h2>
                        <div class="form-group">
                            <label class="form-label">Tryb skanowania:</label>
                            <select id="scan-mode" class="form-control">
                                <option value="normal">Normalny</option>
                                <option value="batch">Batch</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pude≈Çko docelowe:</label>
                            <select id="target-box" class="form-control">
                                <option value="">Brak pude≈Çka</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: var(--space-12);">
                            <button id="start-scan" class="btn btn--primary">Uruchom</button>
                            <button id="stop-scan" class="btn btn--secondary" style="display: none;">Zatrzymaj</button>
                        </div>
                    </div>
                    <div id="qr-reader" class="qr-reader"></div>
                    <div id="scan-results" class="scan-results"></div>
                </div>
            </div>

            <!-- Lista Tab -->
            <div class="tab-content tab-content--active" id="lista-tab">
                <div class="lista-header">
                    <h2>Lista przedmiot√≥w</h2>
                    <div class="lista-controls">
                        <div class="view-toggle">
                            <button id="card-view-btn" class="btn btn--outline btn--sm">
                                <span>üìã</span> Karty
                            </button>
                            <button id="table-view-btn" class="btn btn--primary btn--sm">
                                <span>üìä</span> Tabela
                            </button>
                        </div>
                        <button id="add-item-btn" class="btn btn--primary">
                            <span>‚ûï</span> Dodaj przedmiot
                        </button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="filters">
                    <div class="filters__row">
                        <div class="form-group">
                            <input type="text" id="search-input" class="form-control" placeholder="Szukaj przedmiot√≥w...">
                        </div>
                        <div class="form-group">
                            <select id="box-filter" class="form-control">
                                <option value="">Wszystkie pude≈Çka</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select id="status-filter" class="form-control">
                                <option value="">Wszystkie statusy</option>
                                <option value="with-box">Ma pude≈Çko</option>
                                <option value="no-box">Bez pude≈Çka</option>
                            </select>
                        </div>
                        <button id="clear-filters" class="btn btn--outline btn--sm">Wyczy≈õƒá</button>
                    </div>
                </div>

                <!-- Card View -->
                <div id="card-view" class="items-grid" style="display: none;">
                    <!-- Cards will be populated by JavaScript -->
                </div>

                <!-- Table View -->
                <div id="table-view" class="table-container">
                    <table class="items-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="serial">
                                    Serial <span class="sort-indicator"></span>
                                </th>
                                <th class="sortable" data-sort="item">
                                    Nazwa przedmiotu <span class="sort-indicator"></span>
                                </th>
                                <th class="sortable" data-sort="box">
                                    Status <span class="sort-indicator"></span>
                                </th>
                                <th class="sortable" data-sort="lastSeen">
                                    Ostatnio widziany <span class="sort-indicator"></span>
                                </th>
                                <th class="sortable" data-sort="boxChanged">
                                    Zmiana pude≈Çka <span class="sort-indicator"></span>
                                </th>
                                <th>Akcje</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <!-- Table rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination" id="pagination">
                    <!-- Pagination will be populated by JavaScript -->
                </div>
            </div>

            <!-- Eksport Tab -->
            <div class="tab-content" id="eksport-tab">
                <div class="export-section">
                    <h2>Eksport</h2>
                    <div class="export-options">
                        <div class="card">
                            <div class="card__header">
                                <h3>JSON</h3>
                            </div>
                            <div class="card__body">
                                <p>Eksportuj wszystkie dane w formacie JSON wraz z pude≈Çkami i ustawieniami.</p>
                            </div>
                            <div class="card__footer">
                                <button id="export-json" class="btn btn--primary">üìÅ Pobierz JSON</button>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card__header">
                                <h3>CSV</h3>
                            </div>
                            <div class="card__body">
                                <p>Eksportuj listƒô przedmiot√≥w w formacie CSV dla arkuszy kalkulacyjnych.</p>
                            </div>
                            <div class="card__footer">
                                <button id="export-csv" class="btn btn--primary">üìä Pobierz CSV</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Import Tab -->
            <div class="tab-content" id="import-tab">
                <div class="import-section">
                    <h2>Import danych</h2>
                    <div class="import-options">
                        <div class="card">
                            <div class="card__header">
                                <h3>JSON</h3>
                            </div>
                            <div class="card__body">
                                <p>Importuj kompletne dane z pliku JSON (przedmioty i pude≈Çka).</p>
                                <div class="form-group">
                                    <input type="file" id="import-json-file" accept=".json" class="form-control">
                                </div>
                            </div>
                            <div class="card__footer">
                                <button id="import-json" class="btn btn--primary">üì• Importuj JSON</button>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card__header">
                                <h3>CSV</h3>
                            </div>
                            <div class="card__body">
                                <p>Importuj listƒô przedmiot√≥w z pliku CSV.</p>
                                <div class="form-group">
                                    <input type="file" id="import-csv-file" accept=".csv" class="form-control">
                                </div>
                            </div>
                            <div class="card__footer">
                                <button id="import-csv" class="btn btn--primary">üì• Importuj CSV</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Modals -->
        <!-- Add/Edit Item Modal -->
        <div class="modal hidden" id="item-modal">
            <div class="modal__backdrop"></div>
            <div class="modal__content">
                <div class="modal__header">
                    <h3 id="modal-title">Dodaj przedmiot</h3>
                    <button class="modal__close" id="close-modal">&times;</button>
                </div>
                <div class="modal__body">
                    <form id="item-form">
                        <div class="form-group">
                            <label class="form-label">Numer seryjny:</label>
                            <input type="text" id="item-serial" class="form-control" required placeholder="Wprowad≈∫ numer seryjny">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nazwa przedmiotu:</label>
                            <input type="text" id="item-name" class="form-control" required placeholder="Wprowad≈∫ nazwƒô przedmiotu">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pude≈Çko:</label>
                            <select id="item-box" class="form-control">
                                <option value="">Brak pude≈Çka</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal__footer">
                    <button type="button" class="btn btn--outline" id="cancel-modal">Anuluj</button>
                    <button type="submit" form="item-form" class="btn btn--primary" id="save-item">Zapisz</button>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div class="modal hidden" id="delete-modal">
            <div class="modal__backdrop"></div>
            <div class="modal__content">
                <div class="modal__header">
                    <h3>Potwierd≈∫ usuniƒôcie</h3>
                    <button class="modal__close" id="close-delete-modal">&times;</button>
                </div>
                <div class="modal__body">
                    <p>Czy na pewno chcesz usunƒÖƒá ten przedmiot?</p>
                    <p><strong id="delete-item-name"></strong></p>
                    <p class="text-muted">Ta operacja jest nieodwracalna.</p>
                </div>
                <div class="modal__footer">
                    <button type="button" class="btn btn--outline" id="cancel-delete">Anuluj</button>
                    <button type="button" class="btn btn--primary" style="background: var(--color-error); border-color: var(--color-error);" id="confirm-delete">Usu≈Ñ</button>
                </div>
            </div>
        </div>

        <!-- Box Management Modal -->
        <div class="modal hidden" id="box-modal">
            <div class="modal__backdrop"></div>
            <div class="modal__content">
                <div class="modal__header">
                    <h3>ZarzƒÖdzanie pude≈Çkami</h3>
                    <button class="modal__close" id="close-box-modal">&times;</button>
                </div>
                <div class="modal__body">
                    <div class="box-list" id="box-list">
                        <!-- Boxes will be populated by JavaScript -->
                    </div>
                    <form id="box-form">
                        <h4>Dodaj nowe pude≈Çko</h4>
                        <div class="form-group">
                            <label class="form-label">Kod pude≈Çka:</label>
                            <input type="text" id="box-code" class="form-control" required placeholder="np. BOX01">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Nazwa pude≈Çka:</label>
                            <input type="text" id="box-name" class="form-control" required placeholder="Wprowad≈∫ nazwƒô">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Lokalizacja:</label>
                            <input type="text" id="box-location" class="form-control" required placeholder="Wprowad≈∫ lokalizacjƒô">
                        </div>
                        <button type="submit" class="btn btn--primary">Dodaj pude≈Çko</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
